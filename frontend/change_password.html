<!DOCTYPE html>
<html>
<head>
    <title>Change Password</title>
    <link rel="stylesheet" href="change_password.css">
</head>
<body>
    <div class="container">
        <h2>Change Password</h2>

        <div class="password-container">
            <label for="prevPassword">Previous Password</label>
            <input type="password" id="prevPassword">
            <span class="toggle-eye" onclick="togglePassword('prevPassword')">üëÅÔ∏è</span>
        </div>

        <div class="password-container">
            <label for="newPassword">New Password</label>
            <input type="password" id="newPassword">
            <span class="toggle-eye" onclick="togglePassword('newPassword')">üëÅÔ∏è</span>
        </div>

        <button onclick="changePassword()">Update</button>

        <div id="success"></div>
        <div id="error"></div>
    </div>

    <script>
        function togglePassword(id) {
            const pass = document.getElementById(id);
            pass.type = pass.type === "password" ? "text" : "password";
        }

        function changePassword() {
            const prevPass = document.getElementById('prevPassword').value;
            const newPass = document.getElementById('newPassword').value;
            const successDiv = document.getElementById('success');
            const errorDiv = document.getElementById('error');
            const currentPassword = localStorage.getItem("password") || "baka1234";

            if(prevPass !== currentPassword) {
                errorDiv.innerText = "Previous password is incorrect!";
                successDiv.innerText = "";
            } else if(newPass.length < 4) {
                errorDiv.innerText = "New password too short!";
                successDiv.innerText = "";
            } else {
                localStorage.setItem("password", newPass);
                successDiv.innerText = "Password updated! Redirecting...";
                errorDiv.innerText = "";
                setTimeout(() => {
                    window.location.href = "home.html";
                }, 1500);
            }
        }
    </script>
</body>
</html>
